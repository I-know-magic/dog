<spConfig:streamProcessingConfiguration
	xmlns:spConfig="http://elite.polito.it/spconfig" xmlns:spXML="http://elite.polito.it/blocks"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://elite.polito.it/spconfig ../../StreamProcessingBlocksSpec/spconfig.xsd ">
	<spConfig:chains>
		<!-- active power meter 1 phase 1 -->
		<spXML:chain id="reporting-m1-p1">
			<spXML:blocks>
				<spXML:block id="avg-m1-p1" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-p1" id="reporting-m1-p1-in"
				port="in" />
			<spXML:output blockId="avg-m1-p1" id="reporting-m1-p1-out"
				port="out" />
		</spXML:chain>
		<!-- active power meter 1 phase 2 -->
		<spXML:chain id="reporting-m1-p2">
			<spXML:blocks>
				<spXML:block id="avg-m1-p2" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-p2" id="reporting-m1-p2-in"
				port="in" />
			<spXML:output blockId="avg-m1-p2" id="reporting-m1-p2-out"
				port="out" />
		</spXML:chain>
		<!-- active power meter 1 phase 3 -->
		<spXML:chain id="reporting-m1-p3">
			<spXML:blocks>
				<spXML:block id="avg-m1-p3" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-p3" id="reporting-m1-p3-in"
				port="in" />
			<spXML:output blockId="avg-m1-p3" id="reporting-m1-p3-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 1 phase 1 -->
		<spXML:chain id="reporting-m1-i1">
			<spXML:blocks>
				<spXML:block id="max-m1-i1" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m1-i1" id="reporting-m1-i1-in"
				port="in" />
			<spXML:output blockId="max-m1-i1" id="reporting-m1-i1-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 1 phase 2 -->
		<spXML:chain id="reporting-m1-i2">
			<spXML:blocks>
				<spXML:block id="max-m1-i2" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m1-i2" id="reporting-m1-i2-in"
				port="in" />
			<spXML:output blockId="max-m1-i2" id="reporting-m1-i2-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 1 phase 3 -->
		<spXML:chain id="reporting-m1-i3">
			<spXML:blocks>
				<spXML:block id="max-m1-i3" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m1-i3" id="reporting-m1-i3-in"
				port="in" />
			<spXML:output blockId="max-m1-i3" id="reporting-m1-i3-out"
				port="out" />
		</spXML:chain>
		<!-- active energy - meter 1 -->
		<spXML:chain id="reporting-m1-ae">
			<spXML:blocks>
				<spXML:block id="last-m1-ae" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="last-m1-ae" id="reporting-m1-ae-in"
				port="in" />
			<spXML:output blockId="last-m1-ae" id="reporting-m1-ae-out"
				port="out" />
		</spXML:chain>
		<!-- frequency meter 1 -->
		<spXML:chain id="reporting-m1-f">
			<spXML:blocks>
				<spXML:block id="avg-m1-f" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-f" id="reporting-m1-f-in"
				port="in" />
			<spXML:output blockId="avg-m1-f" id="reporting-m1-f-out"
				port="out" />
		</spXML:chain>
		<!-- power factor meter 1 -->
		<spXML:chain id="reporting-m1-cosphi">
			<spXML:blocks>
				<spXML:block id="avg-m1-cosphi" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-cosphi" id="reporting-m1-cosphi-in"
				port="in" />
			<spXML:output blockId="avg-m1-cosphi" id="reporting-m1-cosphi-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 1 phase 1 -->
		<spXML:chain id="reporting-m1-ln1">
			<spXML:blocks>
				<spXML:block id="avg-m1-ln1" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-ln1" id="reporting-m1-ln1-in"
				port="in" />
			<spXML:output blockId="avg-m1-ln1" id="reporting-m1-ln1-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 1 phase 2 -->
		<spXML:chain id="reporting-m1-ln2">
			<spXML:blocks>
				<spXML:block id="avg-m1-ln2" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-ln2" id="reporting-m1-ln2-in"
				port="in" />
			<spXML:output blockId="avg-m1-ln2" id="reporting-m1-ln2-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 1 phase 3 -->
		<spXML:chain id="reporting-m1-ln3">
			<spXML:blocks>
				<spXML:block id="avg-m1-ln3" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m1-ln3" id="reporting-m1-ln3-in"
				port="in" />
			<spXML:output blockId="avg-m1-ln3" id="reporting-m1-ln3-out"
				port="out" />
		</spXML:chain>
		<!-- active power meter 2 phase 1 -->
		<spXML:chain id="reporting-m2-p1">
			<spXML:blocks>
				<spXML:block id="avg-m2-p1" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-p1" id="reporting-m2-p1-in"
				port="in" />
			<spXML:output blockId="avg-m2-p1" id="reporting-m2-p1-out"
				port="out" />
		</spXML:chain>
		<!-- active power meter 2 phase 2 -->
		<spXML:chain id="reporting-m2-p2">
			<spXML:blocks>
				<spXML:block id="avg-m2-p2" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-p2" id="reporting-m2-p2-in"
				port="in" />
			<spXML:output blockId="avg-m2-p2" id="reporting-m2-p2-out"
				port="out" />
		</spXML:chain>
		<!-- active power meter 2 phase 3 -->
		<spXML:chain id="reporting-m2-p3">
			<spXML:blocks>
				<spXML:block id="avg-m2-p3" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-p3" id="reporting-m2-p3-in"
				port="in" />
			<spXML:output blockId="avg-m2-p3" id="reporting-m2-p3-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 2 phase 1 -->
		<spXML:chain id="reporting-m2-i1">
			<spXML:blocks>
				<spXML:block id="max-m2-i1" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m2-i1" id="reporting-m2-i1-in"
				port="in" />
			<spXML:output blockId="max-m2-i1" id="reporting-m2-i1-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 2 phase 2 -->
		<spXML:chain id="reporting-m2-i2">
			<spXML:blocks>
				<spXML:block id="max-m2-i2" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m2-i2" id="reporting-m2-i2-in"
				port="in" />
			<spXML:output blockId="max-m2-i2" id="reporting-m2-i2-out"
				port="out" />
		</spXML:chain>
		<!-- current meter 2 phase 3 -->
		<spXML:chain id="reporting-m2-i3">
			<spXML:blocks>
				<spXML:block id="max-m2-i3" function="MAX">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="max-m2-i3" id="reporting-m2-i3-in"
				port="in" />
			<spXML:output blockId="max-m2-i3" id="reporting-m2-i3-out"
				port="out" />
		</spXML:chain>
		<!-- active energy - meter 2 -->
		<spXML:chain id="reporting-m2-ae">
			<spXML:blocks>
				<spXML:block id="last-m2-ae" function="LAST">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
				<spXML:block id="delta-m2-ae" function="DELTA" />
			</spXML:blocks>
			<spXML:connections>
				<spXML:connection>
					<spXML:from blockId="last-m2-ae" port="out" />
					<spXML:to blockId="delta-m2-ae" port="in" />
				</spXML:connection>
			</spXML:connections>
			<spXML:input blockId="last-m2-ae" id="reporting-m2-ae-in"
				port="in" />
			<spXML:output blockId="delta-m2-ae" id="reporting-m2-ae-out"
				port="out" />
		</spXML:chain>
		<!-- frequency meter 2 -->
		<spXML:chain id="reporting-m2-f">
			<spXML:blocks>
				<spXML:block id="avg-m2-f" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-f" id="reporting-m2-f-in"
				port="in" />
			<spXML:output blockId="avg-m2-f" id="reporting-m2-f-out"
				port="out" />
		</spXML:chain>
		<!-- power factor meter 2 -->
		<spXML:chain id="reporting-m2-cosphi">
			<spXML:blocks>
				<spXML:block id="avg-m2-cosphi" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-cosphi" id="reporting-m2-cosphi-in"
				port="in" />
			<spXML:output blockId="avg-m2-cosphi" id="reporting-m2-cosphi-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 2 phase 1 -->
		<spXML:chain id="reporting-m2-ln1">
			<spXML:blocks>
				<spXML:block id="avg-m2-ln1" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-ln1" id="reporting-m2-ln1-in"
				port="in" />
			<spXML:output blockId="avg-m2-ln1" id="reporting-m2-ln1-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 2 phase 2 -->
		<spXML:chain id="reporting-m2-ln2">
			<spXML:blocks>
				<spXML:block id="avg-m2-ln2" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s" />
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-ln2" id="reporting-m2-ln2-in"
				port="in" />
			<spXML:output blockId="avg-m2-ln2" id="reporting-m2-ln2-out"
				port="out" />
		</spXML:chain>
		<!-- LN voltage meter 2 phase 3 -->
		<spXML:chain id="reporting-m2-ln3">
			<spXML:blocks>
				<spXML:block id="avg-m2-ln3" function="AVERAGE">
					<spXML:param name="w" value="5" unitOfMeasure="s"/>
					<spXML:param name="mode" value="batch" />
				</spXML:block>
			</spXML:blocks>
			<spXML:input blockId="avg-m2-ln3" id="reporting-m2-ln3-in"
				port="in" />
			<spXML:output blockId="avg-m2-ln3" id="reporting-m2-ln3-out"
				port="out" />
		</spXML:chain>

		<!-- Overall Power -->
		<!-- This can be highly optimized when KNX drivers will support total power 
			measurement -->
		<spXML:chain id="reporting-total-power-stanza">
			<spXML:blocks>
				<spXML:block id="join-tps1" function="JOIN"></spXML:block>
				<spXML:block id="join-tps2" function="JOIN"></spXML:block>
				<spXML:block id="join-tps3" function="JOIN"></spXML:block>
				<spXML:block id="join-tps4" function="JOIN"></spXML:block>
				<spXML:block id="join-tps5" function="JOIN"></spXML:block>
				<spXML:block id="sum-tps" function="SUM">
					<spXML:param name="n" value="6"/>
					<spXML:param name="mode" value="count" />
				</spXML:block>
			</spXML:blocks>
			<spXML:connections>
				<spXML:connection>
					<spXML:from blockId="join-tps1" port="out" />
					<spXML:to blockId="join-tps4" port="in1" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tps2" port="out" />
					<spXML:to blockId="join-tps4" port="in2" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tps3" port="out" />
					<spXML:to blockId="join-tps5" port="in1" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tps4" port="out" />
					<spXML:to blockId="join-tps5" port="in2" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tps5" port="out" />
					<spXML:to blockId="sum-tps" port="in" />
				</spXML:connection>
			</spXML:connections>
			<spXML:input blockId="join-tps1" id="reporting-total-power-stanza-in1"
				port="in1" />
				<spXML:input blockId="join-tps1" id="reporting-total-power-stanza-in2"
				port="in2" />
				<spXML:input blockId="join-tps2" id="reporting-total-power-stanza-in3"
				port="in1" />
				<spXML:input blockId="join-tps2" id="reporting-total-power-stanza-in4"
				port="in2" />
				<spXML:input blockId="join-tps3" id="reporting-total-power-stanza-in5"
				port="in1" />
				<spXML:input blockId="join-tps3" id="reporting-total-power-stanza-in6"
				port="in2" />
			<spXML:output blockId="sum-tps" id="reporting-total-power-stanza-out"
				port="out" />
		</spXML:chain>
		
		<!-- Overall Power edificio-->
		<!-- This can be highly optimized when KNX drivers will support total power 
			measurement -->
		<spXML:chain id="reporting-total-power-edificio">
			<spXML:blocks>
				<spXML:block id="join-tpe1" function="JOIN"></spXML:block>
				<spXML:block id="join-tpe2" function="JOIN"></spXML:block>
				<spXML:block id="join-tpe3" function="JOIN"></spXML:block>
				<spXML:block id="join-tpe4" function="JOIN"></spXML:block>
				<spXML:block id="join-tpe5" function="JOIN"></spXML:block>
				<spXML:block id="sum-tpe" function="SUM">
					<spXML:param name="n" value="6"/>
					<spXML:param name="mode" value="count" />
				</spXML:block>
			</spXML:blocks>
			<spXML:connections>
				<spXML:connection>
					<spXML:from blockId="join-tpe1" port="out" />
					<spXML:to blockId="join-tpe4" port="in1" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tpe2" port="out" />
					<spXML:to blockId="join-tpe4" port="in2" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tpe3" port="out" />
					<spXML:to blockId="join-tpe5" port="in1" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tpe4" port="out" />
					<spXML:to blockId="join-tpe5" port="in2" />
				</spXML:connection>
				<spXML:connection>
					<spXML:from blockId="join-tpe5" port="out" />
					<spXML:to blockId="sum-tpe" port="in" />
				</spXML:connection>
			</spXML:connections>
			<spXML:input blockId="join-tpe1" id="reporting-total-power-edificio-in1"
				port="in1" />
				<spXML:input blockId="join-tpe1" id="reporting-total-power-edificio-in2"
				port="in2" />
				<spXML:input blockId="join-tpe2" id="reporting-total-power-edificio-in3"
				port="in1" />
				<spXML:input blockId="join-tpe2" id="reporting-total-power-edificio-in4"
				port="in2" />
				<spXML:input blockId="join-tpe3" id="reporting-total-power-edificio-in5"
				port="in1" />
				<spXML:input blockId="join-tpe3" id="reporting-total-power-edificio-in6"
				port="in2" />
			<spXML:output blockId="sum-tpe" id="reporting-total-power-edificio-out"
				port="out" />
		</spXML:chain>

	</spConfig:chains>
	<spConfig:eventSources>
		<!-- active power, meter 1 -->
		<spConfig:eventStream id="m1-p1-raw" type="REAL" />
		<spConfig:eventStream id="m1-p2-raw" type="REAL" />
		<spConfig:eventStream id="m1-p3-raw" type="REAL" />
		<!-- current, meter1 -->
		<spConfig:eventStream id="m1-i1-raw" type="REAL" />
		<spConfig:eventStream id="m1-i2-raw" type="REAL" />
		<spConfig:eventStream id="m1-i3-raw" type="REAL" />
		<!-- active energy, meter 1 -->
		<spConfig:eventStream id="m1-ae-raw" type="REAL" />
		<!-- frequency, meter 1 -->
		<spConfig:eventStream id="m1-f-raw" type="REAL" />
		<!-- power factor, meter 1 -->
		<spConfig:eventStream id="m1-cosphi-raw" type="REAL" />
		<!-- LN voltage, meter 1 -->
		<spConfig:eventStream id="m1-ln1-raw" type="REAL" />
		<spConfig:eventStream id="m1-ln2-raw" type="REAL" />
		<spConfig:eventStream id="m1-ln3-raw" type="REAL" />
		<!-- active power, meter 2 -->
		<spConfig:eventStream id="m2-p1-raw" type="REAL" />
		<spConfig:eventStream id="m2-p2-raw" type="REAL" />
		<spConfig:eventStream id="m2-p3-raw" type="REAL" />
		<!-- current, meter1 -->
		<spConfig:eventStream id="m2-i1-raw" type="REAL" />
		<spConfig:eventStream id="m2-i2-raw" type="REAL" />
		<spConfig:eventStream id="m2-i3-raw" type="REAL" />
		<!-- active energy, meter 2 -->
		<spConfig:eventStream id="m2-ae-raw" type="REAL" />
		<!-- frequency, meter 2 -->
		<spConfig:eventStream id="m2-f-raw" type="REAL" />
		<!-- power factor, meter 2 -->
		<spConfig:eventStream id="m2-cosphi-raw" type="REAL" />
		<!-- LN voltage, meter 2 -->
		<spConfig:eventStream id="m2-ln2-raw" type="REAL" />
		<spConfig:eventStream id="m2-ln1-raw" type="REAL" />
		<spConfig:eventStream id="m2-ln3-raw" type="REAL" />
	</spConfig:eventSources>
	<spConfig:eventDrains>
		<!-- active power, meter 1 -->
		<spConfig:eventStream id="drain-avg-m1-p1" type="REAL" />
		<spConfig:eventStream id="drain-avg-m1-p2" type="REAL" />
		<spConfig:eventStream id="drain-avg-m1-p3" type="REAL" />
		<!-- current, meter1 -->
		<spConfig:eventStream id="drain-max-m1-i1" type="REAL" />
		<spConfig:eventStream id="drain-max-m1-i2" type="REAL" />
		<spConfig:eventStream id="drain-max-m1-i3" type="REAL" />
		<!-- active energy, meter 1 -->
		<spConfig:eventStream id="drain-last-delta-m1-ae"
			type="REAL" />
		<!-- frequency, meter 1 -->
		<spConfig:eventStream id="drain-avg-m1-f" type="REAL" />
		<!-- power factor, meter 1 -->
		<spConfig:eventStream id="drain-avg-m1-cosphi"
			type="REAL" />
		<!-- LN Voltage, meter 1 -->
		<spConfig:eventStream id="drain-avg-m1-ln1" type="REAL" />
		<spConfig:eventStream id="drain-avg-m1-ln2" type="REAL" />
		<spConfig:eventStream id="drain-avg-m1-ln3" type="REAL" />
		<!-- active power, meter 2 -->
		<spConfig:eventStream id="drain-avg-m2-p1" type="REAL" />
		<spConfig:eventStream id="drain-avg-m2-p2" type="REAL" />
		<spConfig:eventStream id="drain-avg-m2-p3" type="REAL" />
		<!-- current, meter1 -->
		<spConfig:eventStream id="drain-max-m2-i1" type="REAL" />
		<spConfig:eventStream id="drain-max-m2-i2" type="REAL" />
		<spConfig:eventStream id="drain-max-m2-i3" type="REAL" />
		<!-- active energy, meter 2 -->
		<spConfig:eventStream id="drain-last-delta-m2-ae"
			type="REAL" />
		<!-- frequency, meter 2 -->
		<spConfig:eventStream id="drain-avg-m2-f" type="REAL" />
		<!-- power factor, meter 2 -->
		<spConfig:eventStream id="drain-avg-m2-cosphi"
			type="REAL" />
		<!-- LN Voltage, meter 2 -->
		<spConfig:eventStream id="drain-avg-m2-ln1" type="REAL" />
		<spConfig:eventStream id="drain-avg-m2-ln2" type="REAL" />
		<spConfig:eventStream id="drain-avg-m2-ln3" type="REAL" />
		
		<!-- TotalPower -->
		<spConfig:eventStream id="drain-tps" type="REAL" />
		<spConfig:eventStream id="drain-tpe" type="REAL" />
		
	</spConfig:eventDrains>
	<spConfig:connections>
		<!-- active power, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-p1-raw" chainId="reporting-m1-p1"
				inputId="reporting-m1-p1-in" />
			<spConfig:toDrain drain="drain-avg-m1-p1" chainId="reporting-m1-p1"
				outputId="reporting-m1-p1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-p2-raw" chainId="reporting-m1-p2"
				inputId="reporting-m1-p2-in" />
			<spConfig:toDrain drain="drain-avg-m1-p2" chainId="reporting-m1-p2"
				outputId="reporting-m1-p2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-p3-raw" chainId="reporting-m1-p3"
				inputId="reporting-m1-p3-in" />
			<spConfig:toDrain drain="drain-avg-m1-p3" chainId="reporting-m1-p3"
				outputId="reporting-m1-p3-out" />
		</spConfig:connection>
		<!-- current values, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-i1-raw" chainId="reporting-m1-i1"
				inputId="reporting-m1-i1-in" />
			<spConfig:toDrain drain="drain-max-m1-i1" chainId="reporting-m1-i1"
				outputId="reporting-m1-i1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-i2-raw" chainId="reporting-m1-i2"
				inputId="reporting-m1-i2-in" />
			<spConfig:toDrain drain="drain-max-m1-i2" chainId="reporting-m1-i2"
				outputId="reporting-m1-i2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-i3-raw" chainId="reporting-m1-i3"
				inputId="reporting-m1-i3-in" />
			<spConfig:toDrain drain="drain-max-m1-i3" chainId="reporting-m1-i3"
				outputId="reporting-m1-i3-out" />
		</spConfig:connection>
		<!-- active energy, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-ae-raw" chainId="reporting-m1-ae"
				inputId="reporting-m1-ae-in" />
			<spConfig:toDrain drain="drain-last-delta-m1-ae"
				chainId="reporting-m1-ae" outputId="reporting-m1-ae-out" />
		</spConfig:connection>
		<!-- frequency, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-f-raw" chainId="reporting-m1-f"
				inputId="reporting-m1-f-in" />
			<spConfig:toDrain drain="drain-avg-m1-f" chainId="reporting-m1-f"
				outputId="reporting-m1-f-out" />
		</spConfig:connection>
		<!-- power factor, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-cosphi-raw"
				chainId="reporting-m1-cosphi" inputId="reporting-m1-cosphi-in" />
			<spConfig:toDrain drain="drain-avg-m1-cosphi"
				chainId="reporting-m1-cosphi" outputId="reporting-m1-cosphi-out" />
		</spConfig:connection>
		<!-- LN Voltage, meter 1 -->
		<spConfig:connection>
			<spConfig:fromSource source="m1-ln1-raw" chainId="reporting-m1-ln1"
				inputId="reporting-m1-ln1-in" />
			<spConfig:toDrain drain="drain-avg-m1-ln1" chainId="reporting-m1-ln1"
				outputId="reporting-m1-ln1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-ln2-raw" chainId="reporting-m1-ln2"
				inputId="reporting-m1-ln2-in" />
			<spConfig:toDrain drain="drain-avg-m1-ln2" chainId="reporting-m1-ln2"
				outputId="reporting-m1-ln2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-ln3-raw" chainId="reporting-m1-ln3"
				inputId="reporting-m1-ln3-in" />
			<spConfig:toDrain drain="drain-avg-m1-ln3" chainId="reporting-m1-ln3"
				outputId="reporting-m1-ln3-out" />
		</spConfig:connection>
		<!-- active power, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-p1-raw" chainId="reporting-m2-p1"
				inputId="reporting-m2-p1-in" />
			<spConfig:toDrain drain="drain-avg-m2-p1" chainId="reporting-m2-p1"
				outputId="reporting-m2-p1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-p2-raw" chainId="reporting-m2-p2"
				inputId="reporting-m2-p2-in" />
			<spConfig:toDrain drain="drain-avg-m2-p2" chainId="reporting-m2-p2"
				outputId="reporting-m2-p2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-p3-raw" chainId="reporting-m2-p3"
				inputId="reporting-m2-p3-in" />
			<spConfig:toDrain drain="drain-avg-m2-p3" chainId="reporting-m2-p3"
				outputId="reporting-m2-p3-out" />
		</spConfig:connection>
		<!-- current values, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-i1-raw" chainId="reporting-m2-i1"
				inputId="reporting-m2-i1-in" />
			<spConfig:toDrain drain="drain-max-m2-i1" chainId="reporting-m2-i1"
				outputId="reporting-m2-i1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-i2-raw" chainId="reporting-m2-i2"
				inputId="reporting-m2-i2-in" />
			<spConfig:toDrain drain="drain-max-m2-i2" chainId="reporting-m2-i2"
				outputId="reporting-m2-i2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-i3-raw" chainId="reporting-m2-i3"
				inputId="reporting-m2-i3-in" />
			<spConfig:toDrain drain="drain-max-m2-i3" chainId="reporting-m2-i3"
				outputId="reporting-m2-i3-out" />
		</spConfig:connection>
		<!-- active energy, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-ae-raw" chainId="reporting-m2-ae"
				inputId="reporting-m2-ae-in" />
			<spConfig:toDrain drain="drain-last-delta-m2-ae"
				chainId="reporting-m2-ae" outputId="reporting-m2-ae-out" />
		</spConfig:connection>
		<!-- frequency, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-f-raw" chainId="reporting-m2-f"
				inputId="reporting-m2-f-in" />
			<spConfig:toDrain drain="drain-avg-m2-f" chainId="reporting-m2-f"
				outputId="reporting-m2-f-out" />
		</spConfig:connection>
		<!-- power factor, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-cosphi-raw"
				chainId="reporting-m2-cosphi" inputId="reporting-m2-cosphi-in" />
			<spConfig:toDrain drain="drain-avg-m2-cosphi"
				chainId="reporting-m2-cosphi" outputId="reporting-m2-cosphi-out" />
		</spConfig:connection>
		<!-- LN Voltage, meter 2 -->
		<spConfig:connection>
			<spConfig:fromSource source="m2-cosphi-raw"
				chainId="reporting-m2-ln1" inputId="reporting-m2-ln1-in" />
			<spConfig:toDrain drain="drain-avg-m2-ln1" chainId="reporting-m2-ln1"
				outputId="reporting-m2-ln1-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-ln1-raw" chainId="reporting-m2-ln2"
				inputId="reporting-m2-ln2-in" />
			<spConfig:toDrain drain="drain-avg-m2-ln2" chainId="reporting-m2-ln2"
				outputId="reporting-m2-ln2-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m2-ln3-raw" chainId="reporting-m2-ln3"
				inputId="reporting-m2-ln3-in" />
			<spConfig:toDrain drain="drain-avg-m2-ln3" chainId="reporting-m2-ln3"
				outputId="reporting-m2-ln3-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-p1-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in1" />
			<spConfig:fromSource source="m1-p2-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in2" />
			<spConfig:fromSource source="m1-p3-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in3" />
			<spConfig:fromSource source="m2-p1-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in4" />
			<spConfig:fromSource source="m2-p2-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in5" />
			<spConfig:fromSource source="m2-p3-raw" chainId="reporting-total-power-stanza"
				inputId="reporting-total-power-stanza-in6" />
			<spConfig:toDrain drain="drain-tps" chainId="reporting-total-power-stanza"
				outputId="reporting-total-power-stanza-out" />
		</spConfig:connection>
		<spConfig:connection>
			<spConfig:fromSource source="m1-p1-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in1" />
			<spConfig:fromSource source="m1-p2-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in2" />
			<spConfig:fromSource source="m1-p3-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in3" />
			<spConfig:fromSource source="m2-p1-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in4" />
			<spConfig:fromSource source="m2-p2-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in5" />
			<spConfig:fromSource source="m2-p3-raw" chainId="reporting-total-power-edificio"
				inputId="reporting-total-power-edificio-in6" />
			<spConfig:toDrain drain="drain-tpe" chainId="reporting-total-power-edificio"
				outputId="reporting-total-power-edificio-out" />
		</spConfig:connection>
	</spConfig:connections>
</spConfig:streamProcessingConfiguration>